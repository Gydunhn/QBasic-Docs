
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../animaciones/">
      
      
        <link rel="next" href="../archivos/">
      
      
      <link rel="icon" href="../assets/images/QBlogo2.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.6.11">
    
    
      
        <title>Uso del Ratón - Documentación de QBasic</title>
      
    
    
      <link rel="stylesheet" href="../assets/stylesheets/main.4af4bdda.min.css">
      
        
        <link rel="stylesheet" href="../assets/stylesheets/palette.06af60db.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
    <script>__md_scope=new URL("..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    
    
      
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#uso-del-raton-en-qbasic" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href=".." title="Documentación de QBasic" class="md-header__button md-logo" aria-label="Documentación de QBasic" data-md-component="logo">
      
  <img src="../assets/images/QBlogo2.png" alt="logo">

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Documentación de QBasic
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Uso del Ratón
            
          </span>
        </div>
      </div>
    </div>
    
      
        <form class="md-header__option" data-md-component="palette">
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="indigo"  aria-label="Automatico"  type="radio" name="__palette" id="__palette_0">
    
      <label class="md-header__button md-icon" title="Automatico" for="__palette_1" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="m14.3 16-.7-2h-3.2l-.7 2H7.8L11 7h2l3.2 9zM20 8.69V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12zm-9.15 3.96h2.3L12 9z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: light)" data-md-color-scheme="default" data-md-color-primary="indigo" data-md-color-accent="deep-purple"  aria-label="Modo claro"  type="radio" name="__palette" id="__palette_1">
    
      <label class="md-header__button md-icon" title="Modo claro" for="__palette_2" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a4 4 0 0 0-4 4 4 4 0 0 0 4 4 4 4 0 0 0 4-4 4 4 0 0 0-4-4m0 10a6 6 0 0 1-6-6 6 6 0 0 1 6-6 6 6 0 0 1 6 6 6 6 0 0 1-6 6m8-9.31V4h-4.69L12 .69 8.69 4H4v4.69L.69 12 4 15.31V20h4.69L12 23.31 15.31 20H20v-4.69L23.31 12z"/></svg>
      </label>
    
  
    
    
    
    <input class="md-option" data-md-color-media="(prefers-color-scheme: dark)" data-md-color-scheme="slate" data-md-color-primary="brown" data-md-color-accent="amber"  aria-label="Modo oscuro"  type="radio" name="__palette" id="__palette_2">
    
      <label class="md-header__button md-icon" title="Modo oscuro" for="__palette_0" hidden>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M10 2c-1.82 0-3.53.5-5 1.35C8 5.08 10 8.3 10 12s-2 6.92-5 8.65C6.47 21.5 8.18 22 10 22a10 10 0 0 0 10-10A10 10 0 0 0 10 2"/></svg>
      </label>
    
  
</form>
      
    
    
      <script>var palette=__md_get("__palette");if(palette&&palette.color){if("(prefers-color-scheme)"===palette.color.media){var media=matchMedia("(prefers-color-scheme: light)"),input=document.querySelector(media.matches?"[data-md-color-media='(prefers-color-scheme: light)']":"[data-md-color-media='(prefers-color-scheme: dark)']");palette.color.media=input.getAttribute("data-md-color-media"),palette.color.scheme=input.getAttribute("data-md-color-scheme"),palette.color.primary=input.getAttribute("data-md-color-primary"),palette.color.accent=input.getAttribute("data-md-color-accent")}for(var[key,value]of Object.entries(palette.color))document.body.setAttribute("data-md-color-"+key,value)}</script>
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href=".." title="Documentación de QBasic" class="md-nav__button md-logo" aria-label="Documentación de QBasic" data-md-component="logo">
      
  <img src="../assets/images/QBlogo2.png" alt="logo">

    </a>
    Documentación de QBasic
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href=".." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Inicio
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../faq/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    FAQ
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../historia/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Historia
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../instalacion/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Instalación y Configuración
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../implementaciones/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Implementaciones
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../recursos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Recursos
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../sintaxis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Sintaxis
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../instrucciones/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Instrucciones Básicas
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../estructuras-control/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Estructuras de Control
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../funciones/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Funciones
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../programacion-modular/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Programación Modular
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" >
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Gráficos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            Gráficos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../graficos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Introducción
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../2D/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gráficos 2D
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../3D/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gráficos 3D
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../raycasting/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Raycasting
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../animaciones/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Animaciones
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_13" checked>
        
          
          <label class="md-nav__link" for="__nav_13" id="__nav_13_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Entrada de Usuario
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_13_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_13">
            <span class="md-nav__icon md-icon"></span>
            Entrada de Usuario
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          
  
  
  <span class="md-ellipsis">
    Uso del Ratón
    
  </span>
  

          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    Uso del Ratón
    
  </span>
  

      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#formas-de-usar-el-raton-en-programas-qbasic" class="md-nav__link">
    <span class="md-ellipsis">
      Formas de usar el ratón en programas QBasic
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conceptos-basicos-sobre-interrupciones" class="md-nav__link">
    <span class="md-ellipsis">
      Conceptos básicos sobre interrupciones
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#habilitando-interrupciones-en-qb-45" class="md-nav__link">
    <span class="md-ellipsis">
      Habilitando interrupciones en QB 4.5
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#habilitando-interrupciones-en-qbasic-11" class="md-nav__link">
    <span class="md-ellipsis">
      Habilitando interrupciones en QBasic 1.1
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#primera-llamada-a-interrupcion" class="md-nav__link">
    <span class="md-ellipsis">
      Primera llamada a interrupción
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#funciones-principales-del-raton-int-33h" class="md-nav__link">
    <span class="md-ellipsis">
      Funciones principales del ratón (INT 33h)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Funciones principales del ratón (INT 33h)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#funcion-0-reiniciar-ratonverificar-instalacion" class="md-nav__link">
    <span class="md-ellipsis">
      Función 0 - Reiniciar ratón/Verificar instalación
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funcion-1-mostrar-cursor-del-raton" class="md-nav__link">
    <span class="md-ellipsis">
      Función 1 - Mostrar cursor del ratón
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funcion-2-ocultar-cursor-del-raton" class="md-nav__link">
    <span class="md-ellipsis">
      Función 2 - Ocultar cursor del ratón
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funcion-3-obtener-posicion-y-estado-de-botones" class="md-nav__link">
    <span class="md-ellipsis">
      Función 3 - Obtener posición y estado de botones
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funcion-4-establecer-posicion-del-cursor" class="md-nav__link">
    <span class="md-ellipsis">
      Función 4 - Establecer posición del cursor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funcion-7-establecer-limites-horizontales" class="md-nav__link">
    <span class="md-ellipsis">
      Función 7 - Establecer límites horizontales
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funcion-8-establecer-limites-verticales" class="md-nav__link">
    <span class="md-ellipsis">
      Función 8 - Establecer límites verticales
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funcion-9-definir-cursor-grafico" class="md-nav__link">
    <span class="md-ellipsis">
      Función 9 - Definir cursor gráfico
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funcion-a-definir-cursor-de-texto" class="md-nav__link">
    <span class="md-ellipsis">
      Función A - Definir cursor de texto
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coordenadas-usadas-por-las-funciones-del-raton" class="md-nav__link">
    <span class="md-ellipsis">
      Coordenadas usadas por las funciones del ratón
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#programa-de-ejemplo" class="md-nav__link">
    <span class="md-ellipsis">
      Programa de ejemplo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deteccion-de-clics-y-arrastre" class="md-nav__link">
    <span class="md-ellipsis">
      Detección de clics y arrastre
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cursores-personalizados" class="md-nav__link">
    <span class="md-ellipsis">
      Cursores personalizados
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusión
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../archivos/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Manejo de Archivos
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_15" >
        
          
          <label class="md-nav__link" for="__nav_15" id="__nav_15_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Sonido
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_15_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_15">
            <span class="md-nav__icon md-icon"></span>
            Sonido
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../sonido/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Conceptos Básicos
    
  </span>
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../manipulacion-sonido/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Manipulación de Sonido
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_16" >
        
          
          <label class="md-nav__link" for="__nav_16" id="__nav_16_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Comunicaciones
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_16_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_16">
            <span class="md-nav__icon md-icon"></span>
            Comunicaciones
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../modem/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Uso del Módem
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../gestion-memoria/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Gestión de Memoria
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_18" >
        
          
          <label class="md-nav__link" for="__nav_18" id="__nav_18_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    Estructuras de Datos
    
  </span>
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_18_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_18">
            <span class="md-nav__icon md-icon"></span>
            Estructuras de Datos
          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pilas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Pilas (Stacks)
    
  </span>
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../buenas-practicas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Buenas Prácticas
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../estandares/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Estándares
    
  </span>
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../tecnicas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    Técnicas
    
  </span>
  

      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#formas-de-usar-el-raton-en-programas-qbasic" class="md-nav__link">
    <span class="md-ellipsis">
      Formas de usar el ratón en programas QBasic
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conceptos-basicos-sobre-interrupciones" class="md-nav__link">
    <span class="md-ellipsis">
      Conceptos básicos sobre interrupciones
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#habilitando-interrupciones-en-qb-45" class="md-nav__link">
    <span class="md-ellipsis">
      Habilitando interrupciones en QB 4.5
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#habilitando-interrupciones-en-qbasic-11" class="md-nav__link">
    <span class="md-ellipsis">
      Habilitando interrupciones en QBasic 1.1
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#primera-llamada-a-interrupcion" class="md-nav__link">
    <span class="md-ellipsis">
      Primera llamada a interrupción
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#funciones-principales-del-raton-int-33h" class="md-nav__link">
    <span class="md-ellipsis">
      Funciones principales del ratón (INT 33h)
    </span>
  </a>
  
    <nav class="md-nav" aria-label="Funciones principales del ratón (INT 33h)">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#funcion-0-reiniciar-ratonverificar-instalacion" class="md-nav__link">
    <span class="md-ellipsis">
      Función 0 - Reiniciar ratón/Verificar instalación
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funcion-1-mostrar-cursor-del-raton" class="md-nav__link">
    <span class="md-ellipsis">
      Función 1 - Mostrar cursor del ratón
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funcion-2-ocultar-cursor-del-raton" class="md-nav__link">
    <span class="md-ellipsis">
      Función 2 - Ocultar cursor del ratón
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funcion-3-obtener-posicion-y-estado-de-botones" class="md-nav__link">
    <span class="md-ellipsis">
      Función 3 - Obtener posición y estado de botones
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funcion-4-establecer-posicion-del-cursor" class="md-nav__link">
    <span class="md-ellipsis">
      Función 4 - Establecer posición del cursor
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funcion-7-establecer-limites-horizontales" class="md-nav__link">
    <span class="md-ellipsis">
      Función 7 - Establecer límites horizontales
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funcion-8-establecer-limites-verticales" class="md-nav__link">
    <span class="md-ellipsis">
      Función 8 - Establecer límites verticales
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funcion-9-definir-cursor-grafico" class="md-nav__link">
    <span class="md-ellipsis">
      Función 9 - Definir cursor gráfico
    </span>
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#funcion-a-definir-cursor-de-texto" class="md-nav__link">
    <span class="md-ellipsis">
      Función A - Definir cursor de texto
    </span>
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
        <li class="md-nav__item">
  <a href="#coordenadas-usadas-por-las-funciones-del-raton" class="md-nav__link">
    <span class="md-ellipsis">
      Coordenadas usadas por las funciones del ratón
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#programa-de-ejemplo" class="md-nav__link">
    <span class="md-ellipsis">
      Programa de ejemplo
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#deteccion-de-clics-y-arrastre" class="md-nav__link">
    <span class="md-ellipsis">
      Detección de clics y arrastre
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#cursores-personalizados" class="md-nav__link">
    <span class="md-ellipsis">
      Cursores personalizados
    </span>
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#conclusion" class="md-nav__link">
    <span class="md-ellipsis">
      Conclusión
    </span>
  </a>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="uso-del-raton-en-qbasic">Uso del Ratón en QBasic</h1>
<p><em>Última actualización: 8 de marzo de 2002</em><br />
<em>Autor original: Antoni Gual</em></p>
<p>Este tutorial explica cómo utilizar el ratón en modos VGA estándar de QBasic. Los modos SVGA y Mode-X están fuera del alcance de este documento. La información es válida tanto para QB 4.5 como para QBasic 1.1.</p>
<h2 id="formas-de-usar-el-raton-en-programas-qbasic">Formas de usar el ratón en programas QBasic</h2>
<p>Hay dos formas de implementar el uso del ratón:</p>
<ol>
<li><strong>La forma fácil</strong>: Usar QB4.5 con una biblioteca que lo soporte (Future, DQB, CosmoX, Rellib, Zephyr, etc.)</li>
<li><strong>La forma difícil</strong>: Implementarlo manualmente a través de interrupciones</li>
</ol>
<p>Este tutorial se centra en la segunda opción, explicando cómo hacerlo desde cero.</p>
<h2 id="conceptos-basicos-sobre-interrupciones">Conceptos básicos sobre interrupciones</h2>
<p>Una interrupción es una instrucción especial del procesador que llama a una función. Existen dos tipos:</p>
<ul>
<li><strong>Interrupciones de hardware</strong>: Son disparadas eléctricamente por el hardware cuando necesita atención del procesador (teclado, puertos, disco, etc.)</li>
<li><strong>Interrupciones de software</strong>: Son la API de DOS, la forma de acceder a las funciones del sistema operativo. Casi todas las funciones de DOS se realizan a través de llamadas a interrupciones.</li>
</ul>
<p>El ratón no es parte nativa de DOS, sino un complemento que debe cargarse en CONFIG.SYS (en DOS puro). Para usarlo, debemos llamar a las interrupciones adecuadas, cargar los registros del procesador con los valores apropiados y leer los resultados que devuelven.</p>
<h2 id="habilitando-interrupciones-en-qb-45">Habilitando interrupciones en QB 4.5</h2>
<p>Para usar interrupciones en QB 4.5:</p>
<ol>
<li>Configura los directorios en IDE (Options/Directories) hacia la ruta donde está instalado el compilador</li>
<li>Abre QB con el parámetro <code>/l</code> para cargar la biblioteca predeterminada:</li>
</ol>
<p><code>batch
   myqbpath\qb mysource /l</code></p>
<ol>
<li>Utiliza la función <code>INTERRUPTX</code> que se carga en la biblioteca para gestionar las llamadas a interrupciones</li>
<li>Incluye el archivo QB.BI en tu programa para definir el tipo RegType:</li>
</ol>
<p><code>qbasic
   '$INCLUDE:'QB.BI'</code></p>
<h2 id="habilitando-interrupciones-en-qbasic-11">Habilitando interrupciones en QBasic 1.1</h2>
<p>QBasic 1.1 no soporta bibliotecas, por lo que necesitamos cargar una rutina en ensamblador previamente creada:</p>
<pre><code class="language-qbasic">TYPE RegTypeX
    ax    AS INTEGER
    bx    AS INTEGER
    cx    AS INTEGER
    dx    AS INTEGER
    bp    AS INTEGER
    si    AS INTEGER
    di    AS INTEGER
    flags AS INTEGER
    ds    AS INTEGER
    es    AS INTEGER
END TYPE

SUB INTERRUPTX (intnum AS INTEGER, InReg AS RegTypeX, OutReg AS RegTypeX)
'standard interrupt call compatibility with QBasic
'some  static variables  
STATIC a() AS LONG, bReady AS INTEGER
'If assembler array not created, create it
IF NOT bReady THEN
    'don't change anything
    I =50:DIM a(1 TO I ) AS LONG
    a(1) = &amp;H53EC8B55: a(2) = &amp;H1E575651: a(3) = &amp;H5E8B9C06: a(4) = &amp;HA078B0E
    a(5) = &amp;HC70774E4: a(6) = &amp;HE9FFFF07: a(7) = &amp;HEC8300A1: a(8) = &amp;HB3F88A0A
    a(9) = &amp;HE85E89CD: a(10) = &amp;HCBEA46C7: a(11) = &amp;H74253C90: a(12) = &amp;H75263C04
    a(13) = &amp;HEA46C714: a(14) = &amp;H46C701E8: a(15) = &amp;HC7CB00EC: a(16) = &amp;H2C2EE46
    a(17) = &amp;HF046C7: a(18) = &amp;H85E8B90: a(19) = &amp;H5E8B37FF: a(20) = &amp;HE37FF06
    a(21) = &amp;H50008FB8: a(22) = &amp;HE85E8D16: a(23) = &amp;H8BDA8C53: a(24) = &amp;H378B0A5E
    a(25) = &amp;H8E0C5E8B: a(26) = &amp;H10448B1F: a(27) = &amp;H75FFFF3D: a(28) = &amp;H50C28B02
    a(29) = &amp;H3D12448B: a(30) = &amp;H275FFFF: a(31) = &amp;HC08EC28B: a(32) = &amp;H5C8B048B
    a(33) = &amp;H44C8B02: a(34) = &amp;H8B06548B: a(35) = &amp;H748B0C7C: a(36) = &amp;H9CCB1F0A
    a(37) = &amp;H83EC8B55: a(38) = &amp;H1E5620C5: a(39) = &amp;H89E476C5: a(40) = &amp;H25C8904
    a(41) = &amp;H89044C89: a(42) = &amp;H7C890654: a(43) = &amp;H12448C0C: a(44) = &amp;H8F10448F
    a(45) = &amp;H448F0A44: a(46) = &amp;HE448F08: a(47) = &amp;H9D0EC483: a(48) = &amp;H5E5F1F07
    a(49) = &amp;HCA5D5B59: a(50) = &amp;H9165000A
   'Checksum, can be ommited 
    S1 = 0: S2 = 0: p = VARPTR(a(1)): DEF SEG = VARSEG(a(1))
      FOR I  = 0 TO 199
        S1 = (S1 + PEEK(p + I )) MOD 255: S2 = (S2 + S1) MOD 255
    NEXT I 
    IF S1 OR S2 THEN ERROR 2: intnum = -1: EXIT SUB ' Checksum Error
   'End of the checksum  
    bReady = -1
END IF
'This is where we call our assembler interrupt calling function
DEF SEG = VARSEG(a(1))
    CALL ABSOLUTE(intnum, VARSEG(InReg), VARPTR(InReg),VARSEG(OutReg), VARPTR(OutReg),0)
END SUB
</code></pre>
<h2 id="primera-llamada-a-interrupcion">Primera llamada a interrupción</h2>
<p>Una vez habilitada la capacidad de usar interrupciones, podemos hacer la primera llamada:</p>
<pre><code class="language-qbasic">DIM SHARED Regs as RegtypeX  ' Define la variable compartida

Regs.ax = 0                  ' Función 0: inicializa ratón y detecta si está presente
CALL INTERRUPTX(&amp;H33, Regs, Regs)  ' Llama a la interrupción 33h con los parámetros

' Verifica resultados
IF Regs.ax THEN
    PRINT &quot;Ratón habilitado, tiene &quot;; Regs.bx; &quot; botones.&quot;
ELSE
    PRINT &quot;No se detectó ratón, o el controlador no está cargado&quot;
END IF
</code></pre>
<h2 id="funciones-principales-del-raton-int-33h">Funciones principales del ratón (INT 33h)</h2>
<h3 id="funcion-0-reiniciar-ratonverificar-instalacion">Función 0 - Reiniciar ratón/Verificar instalación</h3>
<pre><code>Entrada:
AX = 00

Retorno:
AX = 0000  controlador no instalado
     FFFF  controlador instalado
BX = número de botones
</code></pre>
<p>Esta función reinicia el ratón a los valores predeterminados:</p>
<ul>
<li>El cursor se posiciona en el centro de la pantalla</li>
<li>El cursor se reinicia y se oculta</li>
<li>No se habilitan interrupciones</li>
<li>Umbral de doble velocidad establecido en 64 mickeys por segundo</li>
<li>Relación mickey a píxel horizontal (8 a 8)</li>
<li>Relación mickey a píxel vertical (16 a 8)</li>
<li>Se establecen anchura y altura máximas para el modo de vídeo</li>
</ul>
<h3 id="funcion-1-mostrar-cursor-del-raton">Función 1 - Mostrar cursor del ratón</h3>
<pre><code>Entrada:
AX = 01

No retorna valores
</code></pre>
<p>Incrementa el contador del cursor; el cursor se muestra si el contador es cero. El valor predeterminado del contador es -1, por lo que el cursor está inicialmente oculto.</p>
<h3 id="funcion-2-ocultar-cursor-del-raton">Función 2 - Ocultar cursor del ratón</h3>
<pre><code>Entrada:
AX = 02

No retorna valores
</code></pre>
<p>Decrementa el contador del cursor; oculta el cursor si el contador no es cero.</p>
<p>Hay dos razones principales para ocultar el cursor:</p>
<ul>
<li>No deseas que el usuario lo vea</li>
<li>En modos gráficos, el controlador del ratón guarda la imagen detrás del cursor. Si no ocultas el cursor antes de actualizar una imagen, cuando el cursor se mueva, restaurará la imagen anterior a tu actualización. Por lo tanto: ocultar ratón → actualizar → mostrar ratón.</li>
</ul>
<h3 id="funcion-3-obtener-posicion-y-estado-de-botones">Función 3 - Obtener posición y estado de botones</h3>
<pre><code>Entrada:
AX = 03

Retorno:
CX = posición horizontal (X) (0..639)
DX = posición vertical (Y) (0..199)
BX = estado de botones:    
     bit 0: botón izquierdo (1 = presionado)
     bit 1: botón derecho (1 = presionado)
     bits 2-15: sin usar
</code></pre>
<p>Una forma fácil de usar el ratón es consultar regularmente esta función.</p>
<h3 id="funcion-4-establecer-posicion-del-cursor">Función 4 - Establecer posición del cursor</h3>
<pre><code>Entrada:
AX = 4
CX = posición horizontal
DX = posición vertical

No retorna valores
</code></pre>
<ul>
<li>Después de inicializar el ratón, el cursor está en el centro de la pantalla</li>
<li>La posición debe estar dentro del rango del modo de vídeo actual</li>
<li>La posición puede redondearse para ajustarse a la resolución del modo de pantalla</li>
</ul>
<h3 id="funcion-7-establecer-limites-horizontales">Función 7 - Establecer límites horizontales</h3>
<pre><code>Entrada:
AX = 7
CX = posición horizontal mínima
DX = posición horizontal máxima

No retorna valores
</code></pre>
<ul>
<li>Restringe el movimiento horizontal del ratón a una ventana</li>
<li>Si el valor mínimo es mayor que el máximo, se intercambian</li>
</ul>
<h3 id="funcion-8-establecer-limites-verticales">Función 8 - Establecer límites verticales</h3>
<pre><code>Entrada:
AX = 8
CX = posición vertical mínima
DX = posición vertical máxima

No retorna valores
</code></pre>
<ul>
<li>Restringe el movimiento vertical del ratón a una ventana</li>
<li>Si el valor mínimo es mayor que el máximo, se intercambian</li>
</ul>
<h3 id="funcion-9-definir-cursor-grafico">Función 9 - Definir cursor gráfico</h3>
<pre><code>Entrada:
AX = 9
BX = posición horizontal del punto caliente (-16 a 16)
CX = posición vertical del punto caliente (-16 a 16)
ES:DX = puntero a las máscaras de pantalla y cursor (mapa de bits de 16 bytes)

No retorna valores
</code></pre>
<ul>
<li>El cursor gráfico siempre es en blanco y negro</li>
<li>Para el punto caliente, el origen de las coordenadas (0,0) es la esquina superior izquierda del mapa de bits</li>
<li>ES:DX apunta a un array de 64 bytes:</li>
<li>bytes 0-31: mapa de bits de máscara de pantalla (16x16) 1 bit por píxel</li>
<li>bytes 31-63: mapa de bits de máscara del cursor (16x16) 1 bit por píxel</li>
</ul>
<h3 id="funcion-a-definir-cursor-de-texto">Función A - Definir cursor de texto</h3>
<pre><code>Entrada:
AX = 0A
BX = 00 cursor de software o atributo
     01 cursor de hardware

Si es cursor de hardware:
CX = línea de inicio del cursor
DX = línea final del cursor

Si es cursor de software/atributo:
CX = máscara: atributo*256+carácter para AND
DX = máscara: atributo*256+carácter para XOR

No retorna valores
</code></pre>
<ul>
<li>El cursor de hardware es un rectángulo que puedes formatear como el cursor de texto en la instrucción LOCATE de QB</li>
<li>El cursor de software/atributo permite hacer cursores coloridos</li>
</ul>
<h2 id="coordenadas-usadas-por-las-funciones-del-raton">Coordenadas usadas por las funciones del ratón</h2>
<p>Las coordenadas del cursor utilizadas en las funciones de INT 33h no siempre corresponden a píxeles o caracteres en la pantalla. Tras obtener las coordenadas del cursor, deberás rescalarlas para que se ajusten a tus necesidades.</p>
<p>Las coordenadas a utilizar son:</p>
<ul>
<li>X en el rango 0-639 para todos los modos VGA</li>
<li>Y dependiendo del modo de pantalla:</li>
<li>Modo 0 (50 líneas): Y = 0-399</li>
<li>Modo 0 (25 líneas), Modos 1, 2, 7, 8, 13: Y = 0-199</li>
<li>Modos 11, 12: Y = 0-479</li>
<li>Modos 9, 10: Y = 0-349</li>
</ul>
<h2 id="programa-de-ejemplo">Programa de ejemplo</h2>
<pre><code class="language-qbasic">'MOUSE DEMO
'Modificado de una publicación en QB45.COM por herman 

'Usuarios de QB4.5: Iniciar Qb con /lqb
'Usuarios de QBasic1.1: borrar la siguiente línea y pegar TYPE y SUB de arriba

'$INCLUDE:'QB.BI'
DIM SHARED Regs AS RegTypeX
CLS: SCREEN 13

Regs.Ax = 0: Mouse                                        'inicializarlo
IF Regs.Ax = 0 THEN PRINT &quot;¡Ratón no presente!&quot;: END      'sin ratón &gt; sin demo
Regs.Ax = 1: Mouse                                        'mostrarlo
DO                                                        'consultarlo           
    Regs.Ax = 3: Mouse                                   
    LOCATE , 0: 
    PRINT USING &quot;X: ###  Y:###&quot;; Regs.Cx; Regs.Dx;        'mostrar coordenadas
LOOP UNTIL Regs.Bx = 1                                    'hasta que se presione el botón izquierdo 
END

SUB Mouse                                                      
CALL INTERRUPTX(&amp;H33, Regs, Regs)
END SUB
</code></pre>
<h2 id="deteccion-de-clics-y-arrastre">Detección de clics y arrastre</h2>
<ul>
<li>Para detectar clics, leer el bit 0 (botón izquierdo) y bit 1 (botón derecho) del registro BX</li>
<li>Para detectar doble clic y arrastres, comparar el estado actual de los botones con el estado anterior:</li>
<li>Si hay un botón presionado, se ha movido desde la última consulta y el botón ya estaba presionado, es un arrastre</li>
<li>Si no se mueve y detectas presionado-no presionado-presionado de nuevo en un corto período de tiempo, es un doble clic</li>
</ul>
<h2 id="cursores-personalizados">Cursores personalizados</h2>
<ul>
<li>Puedes crear tus propios cursores gráficos, similar a crear un sprite y su máscara, pero en un solo color</li>
<li>Para un cursor multicolor, debes ocultar el cursor predeterminado y seguir colocando tu propio sprite donde debería estar el cursor del ratón</li>
<li>En modos de texto, siempre tienes un cursor rectangular, solo puedes modificar su altura o color</li>
</ul>
<h2 id="conclusion">Conclusión</h2>
<p>Con estas instrucciones, puedes implementar soporte para ratón en tus programas de QBasic. Una vez habilitado, simplemente sigue consultando su estado y compara las coordenadas devueltas por la función 3 con las coordenadas de los objetos en la pantalla para saber si el usuario hace clic sobre ellos.</p>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      <script id="__config" type="application/json">{"base": "..", "features": [], "search": "../assets/javascripts/workers/search.f8cc74c7.min.js", "tags": null, "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}, "version": null}</script>
    
    
      <script src="../assets/javascripts/bundle.c8b220af.min.js"></script>
      
    
  </body>
</html>